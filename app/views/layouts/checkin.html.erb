<!DOCTYPE html>
<html>
    <head>
      <title>Geeks Of London Checkin</title>
      <meta name = "viewport" content = "initial-scale = 1.0">
      <%= stylesheet_link_tag  "checkin" %>
      <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    </head>
        <header>
            <h1>Guest CheckIn</h1>
        </header>
        <section>
            <%= yield %>
        </section>
        <script type="text/javascript">
            function isAppleDevice(){
                return (
                    (navigator.userAgent.toLowerCase().indexOf("ipad") > -1) ||
                    (navigator.userAgent.toLowerCase().indexOf("iphone") > -1) ||
                    (navigator.userAgent.toLowerCase().indexOf("ipod") > -1)
                );
            }
            // custom css expression for a case-insensitive contains()
            jQuery.expr[':'].Contains = function(a,i,m){
              return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
            };


            function listFilter(list) { // header is any element, list is an unordered list

            $('.filterinput')
                .change( function () {
                    var filter = $(this).val();
                    if(filter) {
                    // this finds all links in a list that contain the input,
                    // and hide the ones not containing the input while showing the ones that do
                    $(list).find("a:not(:Contains(" + filter + "))").parent().slideUp();
                    $(list).find("a:Contains(" + filter + ")").parent().slideDown();
                    } else {
                    $(list).find("li").slideDown();
                }
                return false;
                })
                .keyup( function () {
                    // fire the above change event after every letter
                    $(this).change();
                });
            }
            
            $(document).ready(function () {
                if (isAppleDevice() == true){
                    $("#scanner-link").attr('href', 'etoken://');
                }
                
                listFilter($(".attendees"));
            });
            
        </script>
    </body>
</html>
